{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Logging &amp; Redirection in EOAP","text":"<p>Proper handling of stdout and stderr is essential for EO Application Packages (EOAPs). Execution environments such as Kubernetes, Calrissian, workflow engines, and OGC API Processes rely on these streams to surface logs to users, operators, and monitoring systems.</p> <p>This page describes how EOAP developers should treat logging, when redirection is appropriate, and common mistakes to avoid.</p>"},{"location":"#why-logging-matters","title":"Why Logging Matters","text":"<p>When a CWL tool runs inside a platform:</p> <ul> <li><code>stdout</code> is where normal program output goes</li> <li><code>stderr</code> is where warnings and diagnostics go</li> <li>logs on these streams are sent live to the platform</li> <li>users see progress, warnings, and errors</li> <li>operators can diagnose failures</li> <li>execution environments can expose logs via API or CLI</li> </ul> <p>If a tool redirects these streams into files, the platform loses log visibility.</p>"},{"location":"#what-not-to-do","title":"What Not to Do","text":"<p>Avoid redirecting logs inside the CWL tool:</p> <pre><code>cwlVersion: v1.2\nclass: CommandLineTool\n\nbaseCommand: [\"bash\", \"run.sh\"]\n\nstdout: result.txt\nstderr: errors.txt\n\nrequirements:\n  InitialWorkDirRequirement:\n    listing:\n      - entry: |\n          #!/bin/bash\n          echo \"Starting\u2026\"          # stdout\n          echo \"Warning message\" &gt;&amp;2 # stderr\n          echo \"Work\u2026\"              \n        entryname: run.sh\ninputs: []\noutputs:\n  result:\n    type: File\n    outputBinding: { glob: result.txt }\n  errors:\n    type: File\n    outputBinding: { glob: errors.txt }\n</code></pre> <p>This captures all logs inside files, preventing:</p> <ul> <li>kubectl logs</li> <li>calrissian log streaming</li> <li>workflow engine log collection</li> <li>OGC API Processes log exposure</li> </ul> <p>Unless <code>stdout</code> or <code>stderr</code> are actual data outputs, this breaks observability.</p>"},{"location":"#when-redirection-is-acceptable","title":"When Redirection Is Acceptable","text":"<p>Redirection may be used when stdout or stderr are part of the formal output of the tool:</p> <ul> <li>tools that naturally print their result to stdout</li> <li>tools that emit structured diagnostic output intentionally on <code>stderr</code></li> <li>simple data outputs such as GeoJSON or CSV printed to <code>stdout</code></li> <li>cases where <code>stdout</code> is the data product, not a log</li> </ul> <p>In these cases, the redirection reflects the design of the underlying CLI tool.</p>"},{"location":"#recommended-pattern","title":"Recommended Pattern","text":"<p>\u2714\ufe0f Leave <code>stdout</code>/<code>stderr</code> unmodified</p> <p>Unless they are real outputs, do not redirect them and let them flow naturally so platforms can collect and display logs.</p> <p>This is the default behaviour when these fields are omitted.</p>"},{"location":"#how-to-capture-structured-output-correctly","title":"How to Capture Structured Output Correctly","text":"<p>If you need structured output:</p> <pre><code>outputs:\n  report:\n    type: File\n    outputBinding:\n      glob: report.json\n</code></pre> <p>Write the file explicitly from your code, instead of sending it to stdout/stderr.</p> <p>This keeps logs separate from data.</p>"},{"location":"#minimal-example-good-practice","title":"Minimal Example (Good Practice)","text":"<pre><code>cwlVersion: v1.2\nclass: CommandLineTool\n\nbaseCommand: [\"bash\", \"run.sh\"]\n\nrequirements:\n  InitialWorkDirRequirement:\n    listing:\n      - entry: |\n          #!/bin/bash\n          echo \"Starting\u2026\"          # stdout\n          echo \"Warning message\" &gt;&amp;2 # stderr\n          echo \"Work\u2026\"              \n        entryname: run.sh\ninputs: []\noutputs: []\n</code></pre> <p>This tool behaves well in all EOAP environments.</p>"},{"location":"#summary","title":"Summary","text":"Scenario Redirect stdout/stderr? Logs, warnings, debug output No Stdout/stderr as real data outputs Yes Structured output (JSON, metadata) Write explicit files instead Testing scenarios Optional redirection"},{"location":"#conclusion","title":"Conclusion","text":"<p>Proper logging is essential for EOAP portability, maintainability, and operational visibility. By following these principles, developers ensure that EO Application Packages behave predictably across all supported execution environments.</p>"}]}